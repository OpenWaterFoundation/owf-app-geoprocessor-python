# Learn GeoProcessor (Dev) / Development Tasks #

This documentation describes common development tasks:

* [Editing Code](#editing-code)
* [Creating Developer Documentation](#developer-documentation)
* [Creating User Documentation](#user-documentation)
* [Testing](#testing)
	+ [Functional Tests](#functional-tests)
	+ [Unit Tests](#unit-tests)
* [Creating Installer](#creating-installer)

--------------------

## Editing Code ##

Code should be edited in an appropriate development tool.
The Open Water Foundation has settled on PyCharm Community Edition for development.
The following guidelines are recommended for using PyCharm:

* As much as possible, follow the [Style Guide for Python Code](https://www.python.org/dev/peps/pep-0008/),
with GeoProcessor conventions:
	+ Package names are generally lowercase
	+ Class names are MixedCase
	+ Non-class module names are lowercase
	+ Function names are lowercase and use underscores to separate words, as needed
* Respond to PyCharm warnings to fix style issues so that each file receives a check-off

## Creating Developer Documentation ##

See the [developer documentation in the main code repository](https://github.com/OpenWaterFoundation/owf-app-geoprocessor-python/blob/master/doc-dev-mkdocs-project/README.md).
The developer documentation is maintained with the code since it needs to be kept consistent with changes in the code.

## Creating User Documentation ##

See the [user documentation repository](https://github.com/OpenWaterFoundation/owf-app-geoprocessor-python-doc-user).
The user documentation is maintained in a separate repository because contributions may be submitted by non-programmers.

## Testing ##

### Functional Tests ###

See the [functional testing repository](https://github.com/OpenWaterFoundation/owf-app-geoprocessor-python-test).
Functional tests are maintained in a separate repository because contributions may be submitted by non-programmers,
and to limit the size of the code repository.

Functional tests stored in the above repository can be run one of two ways:

1. Run individual tests:
	1. Create a file similar to
	[run-tests-steve.bat](https://github.com/OpenWaterFoundation/owf-app-geoprocessor-python-test/blob/master/test/suites/run/run-tests-steve.bat).
	2. Run in a Windows command prompt window.
	3. Review the log file created by the batch file and command file that was run.  Fix issues and run again.
2. Auto-generate the test suite:
	1. In a Windows command prompt window, run the command file to auto-generate the full GeoProcessor test suite:
	[create-test-command-file](https://github.com/OpenWaterFoundation/owf-app-geoprocessor-python-test/blob/master/test/suites/create/create-test-command-file.bat).
	2. In a Windows command prompt window, run the test suite from the previous step:
	[run-geoprocessor-tests.bat](https://github.com/OpenWaterFoundation/owf-app-geoprocessor-python-test/blob/master/test/suites/run/run-geoprocessor-tests.bat)
	3. Review the log file created by the batch file and command files that were run.
	Also review the command summary file (`geoprocessor-tests.gp.summary.html`) that was generated by the test suite command file (see example below for commands that are run),
	which will indicate failed tests in red.
	Fix issues and run again.

```text
# File generated by...
# program:      gp.py 0.0.1
# user:         sam
# date:         2018-01-30T01:33:40.672000
# host:         colorado
# directory:    
# command line: gp.py
#  C:\Users\sam\owf-dev\GeoProcessor\git-repos\owf-app-geoprocessor-python\geoprocessor\app\gp.py
# #             --commands create-regression-test-command-file.gp
# -----------------------------------------------------------------------
#
# The following 68 test cases will be run to compare results with expected results.
# Individual log files are generally created for each test.
StartRegressionTestResultsReport(OutputFile="C:\Users\sam\owf-dev\GeoProcessor\git-repos\owf-app-geoprocessor-python-test\test\suites\run\geoprocessor-tests.gp.out.txt")
RunCommands(CommandFile="..\..\..\test\commands\AddGeoLayerAttribute\test-AddGeoLayerAttribute-Line-Memory.gp")
...other similar commands...
WriteCommandSummaryToFile(OutputFile="C:\Users\sam\owf-dev\GeoProcessor\git-repos\owf-app-geoprocessor-python-test\test\suites\run\geoprocessor-tests.gp.summary.html")
```

### Unit Tests ###

The GeoProcessor does not currently utilize unit tests such a pytest.
However, units tests will be added in the future.
The majority of testing currently uses the functional test framework in order to test full functionality and user experience.

## Creating Installer ##

**TODO - need to figure this out.**

One option is to simply zip/copy the `geoprocessor` folder to the `site-packages` folder within the QGIS installation
and copy the `gp.bat` file to the `QGIS/bin` folder.
A more standard installation will need to be evaluated.
